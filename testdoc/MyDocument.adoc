= The Dangers of Wolpertingers
:doctype: book
:stylesdir: css
:docinfo: shared
:url-wolpertinger: https://en.wikipedia.org/wiki/Wolpertinger
:icons: font

////
Define oids for standards referenced in requirements. 
////

// The SDPI profile described in this documentation
:sdpi_oid.sdpi: 1.3.6.1.4.1.19376.1.6.2.10.1.1.1

// The SDPi plug-and-trust profile described in this documentation
:sdpi_oid.sdpi-p: 1.3.6.1.4.1.19376.1.6.2.11

// The SDPi alerting profile described in this documentation
:sdpi_oid.sdpi-a: 1.3.6.1.4.1.19376.1.6.2.x

// The SDPi reporting profile described in this documentation
:sdpi_oid.sdpi-r: 1.3.6.1.4.1.19376.1.6.2.x

// The SDPi external control profile described in this documentation
:sdpi_oid.sdpi-xC: 1.3.6.1.4.1.19376.1.6.2.x



Don't worry about gumberoos or splintercats.
Something far more fearsome plagues the days, nights, and inbetweens.
Wolpertingers.

Check out RefRequirement:r1001[], it is super important!

And don't forget to look at RefUseCase:stad[], it is a good one. 

== Acronyms


[[acronym_stad,STAD]] STAD
[[label_use_case_name_stad,Synchronized Time Across Devices]] Synchronized Time Across Devices


== Origins

[[an, an label]]
Wolpertingers are {url-wolpertinger}[ravenous beasts].

== Requirements list

Here are the requirements for providers. 

sdpi_requirement_table::[sdpi_req_group=provider]

Here are the requirements for consumers. 

sdpi_requirement_table::[sdpi_req_group=consumer]

Here are the requirements for consumers and discovery proxies. 

sdpi_requirement_table::[sdpi_req_group="consumer,discovery-proxy"]

== Some requirements

.R1021
[sdpi_requirement,sdpi_req_level=shall,sdpi_req_type=tech_feature,sdpi_req_group="provider,discovery-proxy",sdpi_req_specification=sdpi-p]
****

[NORMATIVE]
====
When the vol1_spec_sdpi_p_option_discovery_proxy is enabled for a vol1_spec_sdpi_p_actor_somds_provider Actor, then it shall use the vol2_clause_dev_46, DEV-46 transaction to update the vol1_spec_sdpi_p_actor_discovery_proxy Actor on its network presence and departure.
====

[NOTE]
====
. doh
. ray
. me
====

[RELATED]
====
. <<ref_w3c_ws_eventing_2006>>, section 3.1
. <<ref_ieee_11073_10207_2017>>, §C.57, R0121
====

****

.R1022
[sdpi_requirement#r1022,sdpi_req_level=shall]
****

If a vol1_spec_sdpi_p_actor_somds_provider Actor is configured or provisioned for the vol1_spec_sdpi_p_option_discovery_proxy, but the proxy system is not available, then the vol1_spec_sdpi_p_actor_somds_provider shall revert back to "ad hoc" discovery mode.
****

.R0500
[sdpi_requirement#r0500,sdpi_req_level=shall]
****
A vol1_spec_sdpi_p_actor_somds_provider shall at least provide the port types as specified in vol2_table_appendix_mdpws_service_mapping_port_types.

.Notes
[%collapsible]
====
NOTE: According to acronym_biceps, the GET SERVICE is the only mandatory service to be implemented. This specification extends the list of mandatory services to increase interoperability between vol1_spec_sdpi_p_actor_somds_participants.

NOTE: All port types of SDC are {uri_sdc_wsdl}[available for download].

NOTE: Other port types are currently out of scope of this specification and  be added in a future revision.
====
****

include::R1001.adoc[]

.R0005
[sdpi_requirement,sdpi_req_level=should,sdpi_req_type=tech_feature,sdpi_req_group="consumer,discovery",sdpi_req_specification=sdpi]
****

[NORMATIVE]
====
In its role as an HTTP client, a vol1_spec_sdpi_p_actor_somds_participant should request gzip compression by using Accept-Encoding with "gzip".
====

[EXAMPLE]
====
.HTTP request header to request compression
----
GET /path/to/resource HTTP/1.1
Host: www.example.com
Accept-Encoding: gzip
----

The client indicates gzip compression to be an accepted response encoding. Note that the server is nevertheless free to send the response without compression.

.HTTP response header indicating compressed content
----
HTTP/1.1 200 OK
Date: sun, 26 June 2016 22:38:34 GMT
Server: Apache/1.3.3.7 (Unix)  (Red-Hat/Linux)
Last-Modified: Wed, 08 Jan 2020 23:11:55 GMT
Accept-Ranges: bytes
Content-Length: 438
Connection: close
Content-Type: text/xml; charset=UTF-8
Content-Encoding: gzip
----

The HTTP server decided to encode the response with the gzip compression. Note that servers are not required to actually compress (e.g., due to load conditions or unknown algorithms they are entitled to answer with identity encoding).
====

[RELATED]
====
ref_rfc_7231, section 5.3.4
====

****

.R0015
[sdpi_requirement,sdpi_req_level=should,sdpi_req_type=tech_feature,sdpi_req_group="consumer,discovery",sdpi_req_specification=sdpi]
****

[NORMATIVE]
====
In its role as an HTTP client, a vol1_spec_sdpi_p_actor_somds_participant should request gzip compression by using Accept-Encoding with "gzip".
====

****

.R0016
[sdpi_requirement,sdpi_req_level=should,sdpi_req_type=ref_ics,sdpi_req_group="consumer,discovery",sdpi_req_specification=sdpi,sdpi_ref_id=ref_ieee_11073_10700_2022,sdpi_ref_section=5.2.4,sdpi_ref_req=RR1067]
****

[NORMATIVE]
====
In its role as an HTTP client, a vol1_spec_sdpi_p_actor_somds_participant should request gzip compression by using Accept-Encoding with "gzip".
====

****

.R0017
[sdpi_requirement,sdpi_req_level=should,sdpi_req_type=risk_mitigation,sdpi_req_group="consumer,discovery",sdpi_req_specification=sdpi,sdpi_ses_type=safety,sdpi_ses_test=wire]
****

[NORMATIVE]
====
In its role as an HTTP client, a vol1_spec_sdpi_p_actor_somds_participant should request gzip compression by using Accept-Encoding with "gzip".
====

****




[#vol1_clause_appendix_c_use_case_stad,sdpi_offset=2]
[role="use-case",sdpi_use_case_id=stad]
[sdpi_feature="Synchronized Time Across Devices"]
=== Use Case Feature {var_use_case_id}: <<label_use_case_name_stad>> (<<acronym_stad>>)

// NOTE:  See use case labels in document-declarations.adoc

==== Narrative
Nurse Jean attaches a ventilator to the medical device network in the ICU.  It automatically obtains the correct time.

==== Benefits
Automatically acquiring the time saves the user from spending time entering the time into the device.  It also guarantees that the correct time will be entered.
It is also important for all devices to have a consistent time since the data being exported to consuming devices and systems will use the time stamps from the device to mark the time that the clinical data was acquired.  Since this is part of the clinical record, accuracy is very important.

[#vol1_clause_appendix_c_use_case_stad_technical_precondition]
==== Technical Pre-Conditions

[role=use-case-background]
====
*Given* All devices communicate using a common acronym_md_lan protocol

*And* A Time Source (TS) Service is on the acronym_md_lan network
====

[#vol1_clause_appendix_c_use_case_stad_scenarios]
==== Scenarios

[role=use-case-scenario,sdpi_scenario="Device is connected to the MD LAN network with a Time Source service"]
===== Scenario: <<acronym_stad>> {var_use_case_id}.1 - Device is connected to the MD LAN network with a Time Source service

[role=use-case-steps]
====
*Given* Device has detected at least one acronym_ts_service

*When* The acronym_ts_service is operational

*Then* The device will synchronize its time with the acronym_ts_service
====

====== Safety, Effectiveness and Security - Requirements and Considerations


.R1520
[sdpi_requirement,sdpi_req_level=shall,sdpi_req_type=use_case_feature,sdpi_req_group="consumer,time",sdpi_req_specification=sdpi]
****

[NORMATIVE]
====
The term_manufacturer of a vol1_spec_sdpi_p_actor_somds_participant shall include all of the following information in the accompanying documentation:

 * The responsible organization needs to provide a acronym_ts_service with 50 millisecond accuracy.
 * The responsible organization needs to provide a redundant acronym_ts_service configuration with at least one backup server.
 * The responsible organization needs to configure the same  acronym_ts_service for vol1_spec_sdpi_p_actor_somds_participants that execute term_system_function_contributions together.
====

[NOTE]
====
The 50ms target accuracy is suitable for highly demanding use cases like real time waveform comparison.
====

****

[role=use-case-scenario,sdpi_scenario="Device is connected to the MD LAN network and a user wants to change the device's time"]
===== Scenario: <<acronym_stad>> {var_use_case_id}.2 - Device is connected to the MD LAN network and a user wants to change the device's time

[role=use-case-steps]
====
*Given* Device is operational in acronym_md_lan network

*When*  The user attempts to change the time on the device manually

*Then* The device will disable the ability to change its time manually
====

====== Safety, Effectiveness and Security - Requirements and Considerations

.R1510
[sdpi_requirement,sdpi_req_level=shall,sdpi_req_type=use_case_feature,sdpi_req_specification=sdpi]
****
[NORMATIVE]
====
A vol1_spec_sdpi_p_actor_somds_participant shall not allow manual configuration of its internal clock while the device is operational in an acronym_md_lan network.
====

[NOTE]
====
NOTE: Since manual time adjustments of the device's internal clock would lead to plausible but still inaccurate timestamps, this requirement also prohibits manual adjustments when the acronym_ts_service is not available.
====
****

=== Implementation conformance statements

==== Provider

Requirements applicable to all SDPi providers

sdpi_ics_table::[sdpi_req_group=provider]

==== Consumer

Requirements applicable to all SDPi consumers

sdpi_ics_table::[sdpi_req_group=consumer]

==== Discovery proxy

Requirements applicable to all SDPi discovery proxies. 

sdpi_ics_table::[sdpi_req_group=discovery-proxy]


[bibliography]
=== Referenced Standards

* [[[ref_ieee_11073_10101_2020,IEEE 11073-10101:2020]]] IEEE 11073-10101™ International Standard - Health informatics--Device interoperability--Part 10101:Point-of-care medical device communication--Nomenclature.  Available at https://standards.ieee.org/ieee/11073-10101/10343/[IEEE online standards store].

* [[[ref_ieee_11073_10201_2004,IEEE 11073-10201:2004]]] IEEE 11073-10201™ International Standard - Health informatics--Device interoperability--Part 10201:Point-of-care medical device communication--Domain information model.  Note this was updated in 2020.  Available at https://standards.ieee.org/ieee/11073-10201/10263/[IEEE online standards store].

* [[[ref_ieee_11073_10207_2017,ISO/IEEE 11073-10207:2017]]] ISO/IEEE 11073-10207-2017, Health informatics — Point-of-care medical device communication — Part 10207: Domain Information and Service Model for Service-Oriented Point-of-Care Medical Device Communication, 2017-12, available at https://standards.ieee.org/ieee/11073-10207/6032 footnote:ieee_permission[]

* [[[ref_ieee_11073_10700_2022,IEEE 11073-10700:2022]]] IEEE P11073-10700™/D7 Draft Standard for Health Informatics – Device Interoperability – Part 10700: Point-of-Care Medical Device Communication – Standard for Base Requirements for Participants in a Service-Oriented Device Connectivity (SDC) System.

* [[[ref_ieee_11073_10701_2022,IEEE 11073-10701:2022]]] IEEE P11073-10701™/D4 Draft Standard for Health Informatics – Device Interoperability – Part 10701: Point-of-Care Medical Device Communication - Metric Provisioning by Participants in a Service-Oriented Device Connectivity (SDC) System

* [[[ref_oasis_dpws_2009,OASIS DPWS:2009]]] OASIS Standard, Devices Profile for Web Services Version 1.1, OASIS Standard, 1 July 2009, available at http://docs.oasis-open.org/ws-dd/dpws/wsdd-dpws-1.1-spec.html

* [[[ref_oasis_soap_over_udp_v1_1, OASIS SOAP-over-UDP Version 1.1]]] OASIS Standard, SOAP-over-UDP Version 1.1, July 2009, available at http://docs.oasis-open.org/ws-dd/soapoverudp/1.1/os/wsdd-soapoverudp-1.1-spec-os.docx.

* [[[ref_oasis_ws_addressing_2006,W3C Recommendation, WS-Addressing:2006]]] Web Services Addressing 1.0 - Core (WS-Eventing), W3C Recommendation 9 May 2006, available at https://www.w3.org/TR/2006/REC-ws-addr-core-20060509/

* [[[ref_oasis_ws_discovery_2009,OASIS WS-Discovery:2009]]] OASIS Standard, Web Services Dynamic Discovery (WS-Discovery) Version 1.1, OASIS Standard, 1 July 2009, available at http://docs.oasis-open.org/ws-dd/discovery/1.1/wsdd-discovery-1.1-spec.html

* [[[ref_w3c_ws_eventing_2006,W3C Submission, WS-Eventing:2006]]] W3C Web Services Eventing (WS-Eventing), W3C Member Submission 15 March 2006, available at https://www.w3.org/Submission/2006/SUBM-WS-Eventing-20060315/

* [[[ref_w3c_ws_metadata_exchange_2008,W3C Submission, WS-MetadataExchange:2008]]] Web Services Metadata Exchange 1.1 (WS-MetadataExchange), W3C Member Submission 13 August 2008, available at https://www.w3.org/Submission/2008/SUBM-WS-MetadataExchange-20080813/

* [[[ref_wc3_ws_transfer_2006,WC3 Standard, WS-Transfer:2006]]] WC3 Web Services Transfer (WS-Transfer), W3C Standard, 27 September 2006, available at https://www.w3.org/Submission/WS-Transfer/
